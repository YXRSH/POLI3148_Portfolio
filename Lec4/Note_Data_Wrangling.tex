% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\usepackage[normalem]{ulem}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Data Wrangling (1)},
  pdfauthor={Haohan Chen},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Data Wrangling (1)}
\author{Haohan Chen}
\date{Last update: 十月 08, 2023}

\begin{document}
\maketitle

\hypertarget{objectives-of-this-lecture}{%
\subsection{Objectives of this
Lecture}\label{objectives-of-this-lecture}}

This lecture introduces data wrangling with R. Using V-Dem data as an
example, we will learn how to use the wrangle data with a set of
\href{https://www.tidyverse.org/}{\texttt{tidyverse}} functionality.
Specifically, we will focus on functions\ldots{}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  to import and export data: \texttt{read\_csv} , \texttt{write\_csv}
  (with a brief introduction to other data import/ export functions from
  \href{https://readr.tidyverse.org/}{\texttt{readr}}).
\item
  to take a subset of \emph{columns} in the existing data:
  \texttt{select}
\item
  to rename columns: \texttt{rename}
\item
  to take a subset of \emph{rows} by some simple conditions:
  \texttt{slice\_}
\item
  to take a subset of \emph{rows} by some more complicated conditions:
  \texttt{filter}
\item
  to sort the rows based on the value of one or multiple columns:
  \texttt{arrange}
\item
  to perform (4) (5) (6) group by group: \texttt{group\_by},
  \texttt{ungroup}
\item
  to create new columns in the data: \texttt{group\_by},
  \texttt{mutate}, \texttt{ungroup}
\item
  to summarize the data: \texttt{group\_by}, \texttt{summarise},
  \texttt{ungroup}
\end{enumerate}

\hypertarget{outline-of-in-class-demo}{%
\subsection{Outline of In-Class Demo}\label{outline-of-in-class-demo}}

To demonstrate the above functionality, we will use real-world political
data from \href{https://v-dem.net/}{V-Dem}. Specifically, we will use
the above function to explore the state of global economic development
from 1984 to 2022. Our effort will take the following step (with
one-on-one mappings with the above tools).

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Read a part of pre-processed V-Dem data into R: 1984-2022 ``external''
  data in the V-Dem dataset.
\item
  Consulting the dataset's
  \href{https://github.com/haohanchen/HKU_POLI3148_23Fall/blob/main/_DataPublic_/vdem/documentation/codebook_v13.pdf}{codebook}
  and take a \textbf{subset} of indicators of \emph{economic
  development} (along with country-year identifiers).

  \begin{itemize}
  \item
    \emph{See a list of country-yer identifiers on p.~5 of the codebook
    (under ``1.7 Identifier Variables in the V-Dem Datasets'').}
  \item
    \emph{See a list of development indicators on p.~23 of the codebook
    (under ``9. Background Factors'').}
  \end{itemize}
\item
  Rename the column to name their names informative to readers.
\item
  Find the country-year with the \emph{highest} and \emph{lowest} level
  of economic development. In addition, create a dataset containing a
  random sample of country-year in the dataset.
\item
  Create a dataset focusing on the economic development of Asian
  countries and regions; Create a dataset that contains only countries/
  regions whose development level pass certain threshold.
\item
  Create a dataset whose rows are sorted by the development level of
  country-year.
\item
  Create a dataset that contains the year of the higest development
  level for each country/ region respectively.
\item
  Add the following economic indicators to the data:

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    Country-year development level with reference to that of 1984.
  \item
    Year-on-year economic growth.
  \end{enumerate}
\item
  Perform a data availability/ integrity check. Then aggregate the data
  into a new country-level dataset which contains the following
  indicators:

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    Average development level from 1984 to 2022.
  \item
    Magnitude of growth from 1984 to 2022.
  \end{enumerate}
\end{enumerate}

\hypertarget{in-class-exercise}{%
\subsection{In-Class Exercise}\label{in-class-exercise}}

The quality of education has a decisive effect on a country's future
development. Applying the data wrangling tools we introduce in this
lecture, perform the following task:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Coodbook lookup}. Look up the codebook, answer the following
  questions:

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    What indicators regarding the quality of education are available in
    the V-Dem datasets?
  \item
    What are the data's coverage (i.e., for which countries and years do
    we have data?)
  \item
    What are their sources? Provide the link to least 1 source.
  \end{enumerate}
\item
  \textbf{Subset by columns}

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    Create a dataset containing only the country-year identifiers and
    indicators of education quality.
  \item
    Rename the columns of education quality to make them informative.
  \end{enumerate}
\item
  \textbf{Subset by rows}

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    List 5 countries-years that have the highest education level among
    its population.
  \item
    List 5 countries-years that suffer from the most severe inequality
    in education.
  \end{enumerate}
\item
  \textbf{Summarize the data}

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    Check data availability: For which countries and years are the
    indicators of education quality available?
  \item
    Create two types of country-level indicators of education quality

    \begin{enumerate}
    \def\labelenumiii{\arabic{enumiii}.}
    \item
      Average level of education quality from 1984 to 2022
    \item
      Change of education quality from 1984 to 2022
    \end{enumerate}
  \item
    Examine the data and \emph{briefly} discuss: Which countries perform
    the best and the worst in terms of education quality in the past
    four decades?
  \end{enumerate}
\end{enumerate}

\textbf{Submission requirement:} You will submit your outputs through
Moodle. In your submission:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Attach a PDF document rendered by Rmarkdown
\item
  In the text field of your submission, include the link to the
  corresponding Rmarkdown file in your \emph{DaSPPA portfolio} GitHub
  repo.
\end{enumerate}

\textbf{Due:} October 6, 2023

\emph{Note:} \emph{Please} \emph{only use the functions we cover in this
lecture for this exercise. There is \uline{absolutely no need} to
perform any data visualization for this exercise\ldots{} We will get
there in later lectures.}

\hypertarget{further-reading}{%
\subsection{Further reading}\label{further-reading}}

\begin{itemize}
\item
  R for Data Science (2e) Chapters 4, 5, 8:
  \url{https://r4ds.hadley.nz/}
\item
  \texttt{readr} documentation (note: read the ``cheatsheet''):
  \url{https://readr.tidyverse.org/}
\item
  \texttt{dplyr} documentation (note: read the ``cheatsheet''):
  \url{https://dplyr.tidyverse.org/}
\item
  V-Dem documentation: \url{https://v-dem.net/}
\end{itemize}

\hypertarget{demo}{%
\subsection{Demo}\label{demo}}

\hypertarget{load-the-tidyverse-packages}{%
\subsubsection{\texorpdfstring{0. Load the \texttt{tidyverse}
Packages}{0. Load the tidyverse Packages}}\label{load-the-tidyverse-packages}}

This section loads the packages we need in this lecture.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\end{Highlighting}
\end{Shaded}

\hypertarget{import-and-export-the-v-dem-data}{%
\subsubsection{1. Import and Export the V-Dem
Data}\label{import-and-export-the-v-dem-data}}

This section loads the VDEM dataset and describe its basic information

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"\_DataPublic\_/vdem/1984\_2022/vdem\_1984\_2022\_external.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Rows: 6789 Columns: 211
## -- Column specification --------------------------------------------------------
## Delimiter: ","
## chr    (3): country_name, country_text_id, histname
## dbl  (207): country_id, year, project, historical, codingstart, codingend, c...
## date   (1): historical_date
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{getwd}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "C:/Users/18474/OneDrive - The University of Hong Kong/文档/POLI_in_class/POLI3148-0921_DaSPPA_Portfolio-main"
\end{verbatim}

\hypertarget{select-economic-development-indicators}{%
\subsubsection{2. Select economic development
indicators}\label{select-economic-development-indicators}}

We start by examining the dataset. \texttt{name()} is almost always the
first function I apply to a dataset. It gives us the names of all the
columns

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{names}\NormalTok{(d)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   [1] "country_name"                "country_text_id"            
##   [3] "country_id"                  "year"                       
##   [5] "historical_date"             "project"                    
##   [7] "historical"                  "histname"                   
##   [9] "codingstart"                 "codingend"                  
##  [11] "codingstart_contemp"         "codingend_contemp"          
##  [13] "codingstart_hist"            "codingend_hist"             
##  [15] "gapstart1"                   "gapstart2"                  
##  [17] "gapstart3"                   "gapend1"                    
##  [19] "gapend2"                     "gapend3"                    
##  [21] "gap_index"                   "COWcode"                    
##  [23] "e_v2x_api_3C"                "e_v2x_api_4C"               
##  [25] "e_v2x_api_5C"                "e_v2x_civlib_3C"            
##  [27] "e_v2x_civlib_4C"             "e_v2x_civlib_5C"            
##  [29] "e_v2x_clphy_3C"              "e_v2x_clphy_4C"             
##  [31] "e_v2x_clphy_5C"              "e_v2x_clpol_3C"             
##  [33] "e_v2x_clpol_4C"              "e_v2x_clpol_5C"             
##  [35] "e_v2x_clpriv_3C"             "e_v2x_clpriv_4C"            
##  [37] "e_v2x_clpriv_5C"             "e_v2x_corr_3C"              
##  [39] "e_v2x_corr_4C"               "e_v2x_corr_5C"              
##  [41] "e_v2x_cspart_3C"             "e_v2x_cspart_4C"            
##  [43] "e_v2x_cspart_5C"             "e_v2x_delibdem_3C"          
##  [45] "e_v2x_delibdem_4C"           "e_v2x_delibdem_5C"          
##  [47] "e_v2x_EDcomp_thick_3C"       "e_v2x_EDcomp_thick_4C"      
##  [49] "e_v2x_EDcomp_thick_5C"       "e_v2x_egal_3C"              
##  [51] "e_v2x_egal_4C"               "e_v2x_egal_5C"              
##  [53] "e_v2x_egaldem_3C"            "e_v2x_egaldem_4C"           
##  [55] "e_v2x_egaldem_5C"            "e_v2x_elecoff_3C"           
##  [57] "e_v2x_elecoff_4C"            "e_v2x_elecoff_5C"           
##  [59] "e_v2x_execorr_3C"            "e_v2x_execorr_4C"           
##  [61] "e_v2x_execorr_5C"            "e_v2x_feduni_3C"            
##  [63] "e_v2x_feduni_4C"             "e_v2x_feduni_5C"            
##  [65] "e_v2x_frassoc_thick_3C"      "e_v2x_frassoc_thick_4C"     
##  [67] "e_v2x_frassoc_thick_5C"      "e_v2x_freexp_3C"            
##  [69] "e_v2x_freexp_4C"             "e_v2x_freexp_5C"            
##  [71] "e_v2x_freexp_altinf_3C"      "e_v2x_freexp_altinf_4C"     
##  [73] "e_v2x_freexp_altinf_5C"      "e_v2x_gencl_3C"             
##  [75] "e_v2x_gencl_4C"              "e_v2x_gencl_5C"             
##  [77] "e_v2x_gencs_3C"              "e_v2x_gencs_4C"             
##  [79] "e_v2x_gencs_5C"              "e_v2x_gender_3C"            
##  [81] "e_v2x_gender_4C"             "e_v2x_gender_5C"            
##  [83] "e_v2x_genpp_3C"              "e_v2x_genpp_4C"             
##  [85] "e_v2x_genpp_5C"              "e_v2x_jucon_3C"             
##  [87] "e_v2x_jucon_4C"              "e_v2x_jucon_5C"             
##  [89] "e_v2x_libdem_3C"             "e_v2x_libdem_4C"            
##  [91] "e_v2x_libdem_5C"             "e_v2x_liberal_3C"           
##  [93] "e_v2x_liberal_4C"            "e_v2x_liberal_5C"           
##  [95] "e_v2x_mpi_3C"                "e_v2x_mpi_4C"               
##  [97] "e_v2x_mpi_5C"                "e_v2x_partip_3C"            
##  [99] "e_v2x_partip_4C"             "e_v2x_partip_5C"            
## [101] "e_v2x_partipdem_3C"          "e_v2x_partipdem_4C"         
## [103] "e_v2x_partipdem_5C"          "e_v2x_polyarchy_3C"         
## [105] "e_v2x_polyarchy_4C"          "e_v2x_polyarchy_5C"         
## [107] "e_v2x_pubcorr_3C"            "e_v2x_pubcorr_4C"           
## [109] "e_v2x_pubcorr_5C"            "e_v2x_suffr_3C"             
## [111] "e_v2x_suffr_4C"              "e_v2x_suffr_5C"             
## [113] "e_v2xcl_rol_3C"              "e_v2xcl_rol_4C"             
## [115] "e_v2xcl_rol_5C"              "e_v2xcs_ccsi_3C"            
## [117] "e_v2xcs_ccsi_4C"             "e_v2xcs_ccsi_5C"            
## [119] "e_v2xdd_dd_3C"               "e_v2xdd_dd_4C"              
## [121] "e_v2xdd_dd_5C"               "e_v2xdl_delib_3C"           
## [123] "e_v2xdl_delib_4C"            "e_v2xdl_delib_5C"           
## [125] "e_v2xeg_eqdr_3C"             "e_v2xeg_eqdr_4C"            
## [127] "e_v2xeg_eqdr_5C"             "e_v2xeg_eqprotec_3C"        
## [129] "e_v2xeg_eqprotec_4C"         "e_v2xeg_eqprotec_5C"        
## [131] "e_v2xel_frefair_3C"          "e_v2xel_frefair_4C"         
## [133] "e_v2xel_frefair_5C"          "e_v2xel_locelec_3C"         
## [135] "e_v2xel_locelec_4C"          "e_v2xel_locelec_5C"         
## [137] "e_v2xel_regelec_3C"          "e_v2xel_regelec_4C"         
## [139] "e_v2xel_regelec_5C"          "e_v2xlg_legcon_3C"          
## [141] "e_v2xlg_legcon_4C"           "e_v2xlg_legcon_5C"          
## [143] "e_v2xme_altinf_3C"           "e_v2xme_altinf_4C"          
## [145] "e_v2xme_altinf_5C"           "e_v2xps_party_3C"           
## [147] "e_v2xps_party_4C"            "e_v2xps_party_5C"           
## [149] "e_boix_regime"               "e_democracy_breakdowns"     
## [151] "e_democracy_omitteddata"     "e_democracy_trans"          
## [153] "e_fh_cl"                     "e_fh_pr"                    
## [155] "e_fh_rol"                    "e_fh_status"                
## [157] "e_wbgi_cce"                  "e_wbgi_gee"                 
## [159] "e_wbgi_pve"                  "e_wbgi_rle"                 
## [161] "e_wbgi_rqe"                  "e_wbgi_vae"                 
## [163] "e_lexical_index"             "e_uds_median"               
## [165] "e_uds_mean"                  "e_uds_pct025"               
## [167] "e_uds_pct975"                "e_coups"                    
## [169] "e_legparty"                  "e_autoc"                    
## [171] "e_democ"                     "e_p_polity"                 
## [173] "e_polcomp"                   "e_polity2"                  
## [175] "e_bnr_dem"                   "e_chga_demo"                
## [177] "e_ti_cpi"                    "e_vanhanen"                 
## [179] "e_peaveduc"                  "e_peedgini"                 
## [181] "e_area"                      "e_regiongeo"                
## [183] "e_regionpol"                 "e_regionpol_6C"             
## [185] "e_cow_exports"               "e_cow_imports"              
## [187] "e_gdp"                       "e_gdp_sd"                   
## [189] "e_gdppc"                     "e_gdppc_sd"                 
## [191] "e_miinflat"                  "e_pop"                      
## [193] "e_pop_sd"                    "e_total_fuel_income_pc"     
## [195] "e_total_oil_income_pc"       "e_total_resources_income_pc"
## [197] "e_radio_n"                   "e_miferrat"                 
## [199] "e_mipopula"                  "e_miurbani"                 
## [201] "e_miurbpop"                  "e_pefeliex"                 
## [203] "e_peinfmor"                  "e_pelifeex"                 
## [205] "e_pematmor"                  "e_wb_pop"                   
## [207] "e_civil_war"                 "e_miinteco"                 
## [209] "e_miinterc"                  "e_pt_coup"                  
## [211] "e_pt_coup_attempts"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(country\_name, country\_id, year) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 3
##    country_name country_id  year
##    <chr>             <dbl> <dbl>
##  1 Mexico                3  1984
##  2 Mexico                3  1985
##  3 Mexico                3  1986
##  4 Mexico                3  1987
##  5 Mexico                3  1988
##  6 Mexico                3  1989
##  7 Mexico                3  1990
##  8 Mexico                3  1991
##  9 Mexico                3  1992
## 10 Mexico                3  1993
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# which countries are in this dataset (no repetitions)}
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(country\_name) }\SpecialCharTok{|\textgreater{}} \FunctionTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 181 x 1
##    country_name 
##    <chr>        
##  1 Mexico       
##  2 Suriname     
##  3 Sweden       
##  4 Switzerland  
##  5 Ghana        
##  6 South Africa 
##  7 Japan        
##  8 Burma/Myanmar
##  9 Russia       
## 10 Albania      
## # i 171 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# which year are in the dataset}
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(year) }\SpecialCharTok{|\textgreater{}} \FunctionTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 39 x 1
##     year
##    <dbl>
##  1  1984
##  2  1985
##  3  1986
##  4  1987
##  5  1988
##  6  1989
##  7  1990
##  8  1991
##  9  1992
## 10  1993
## # i 29 more rows
\end{verbatim}

\hypertarget{l4-recording}{%
\subsubsection{02:22:00 L4 recording}\label{l4-recording}}

We may use some alternative functions that provides information about
the dataset. The \texttt{str()} provides not only variable names, but
also their data types and a few example data points.

select both the country identifiers, GDP, and GDP per capita.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(country\_name, country\_id, year, e\_gdp, e\_gdppc)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 5
##    country_name country_id  year   e_gdp e_gdppc
##    <chr>             <dbl> <dbl>   <dbl>   <dbl>
##  1 Mexico                3  1984  93563.    11.7
##  2 Mexico                3  1985  94259.    11.5
##  3 Mexico                3  1986  92750.    11.1
##  4 Mexico                3  1987  93220.    10.9
##  5 Mexico                3  1988  94687.    10.8
##  6 Mexico                3  1989  98145.    11.0
##  7 Mexico                3  1990 103254.    11.4
##  8 Mexico                3  1991 107374.    11.6
##  9 Mexico                3  1992 111533.    11.9
## 10 Mexico                3  1993 114611.    12.0
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Warning: If you have many variables, the output of str() will be lengthy!}
\FunctionTok{str}\NormalTok{(d)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## spc_tbl_ [6,789 x 211] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ country_name               : chr [1:6789] "Mexico" "Mexico" "Mexico" "Mexico" ...
##  $ country_text_id            : chr [1:6789] "MEX" "MEX" "MEX" "MEX" ...
##  $ country_id                 : num [1:6789] 3 3 3 3 3 3 3 3 3 3 ...
##  $ year                       : num [1:6789] 1984 1985 1986 1987 1988 ...
##  $ historical_date            : Date[1:6789], format: "1984-12-31" "1985-12-31" ...
##  $ project                    : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ historical                 : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ histname                   : chr [1:6789] "United Mexican States" "United Mexican States" "United Mexican States" "United Mexican States" ...
##  $ codingstart                : num [1:6789] 1789 1789 1789 1789 1789 ...
##  $ codingend                  : num [1:6789] 2022 2022 2022 2022 2022 ...
##  $ codingstart_contemp        : num [1:6789] 1900 1900 1900 1900 1900 1900 1900 1900 1900 1900 ...
##  $ codingend_contemp          : num [1:6789] 2022 2022 2022 2022 2022 ...
##  $ codingstart_hist           : num [1:6789] 1789 1789 1789 1789 1789 ...
##  $ codingend_hist             : num [1:6789] 1920 1920 1920 1920 1920 1920 1920 1920 1920 1920 ...
##  $ gapstart1                  : num [1:6789] NA NA NA NA NA NA NA NA NA NA ...
##  $ gapstart2                  : num [1:6789] NA NA NA NA NA NA NA NA NA NA ...
##  $ gapstart3                  : num [1:6789] NA NA NA NA NA NA NA NA NA NA ...
##  $ gapend1                    : num [1:6789] NA NA NA NA NA NA NA NA NA NA ...
##  $ gapend2                    : num [1:6789] NA NA NA NA NA NA NA NA NA NA ...
##  $ gapend3                    : num [1:6789] NA NA NA NA NA NA NA NA NA NA ...
##  $ gap_index                  : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ COWcode                    : num [1:6789] 70 70 70 70 70 70 70 70 70 70 ...
##  $ e_v2x_api_3C               : num [1:6789] NA NA NA NA 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_api_4C               : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_api_5C               : num [1:6789] 0.5 0.5 0.5 0.5 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_civlib_3C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_civlib_4C            : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_civlib_5C            : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_clphy_3C             : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1 1 1 ...
##  $ e_v2x_clphy_4C             : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.667 0.667 0.667 ...
##  $ e_v2x_clphy_5C             : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_clpol_3C             : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_clpol_4C             : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_clpol_5C             : num [1:6789] 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_clpriv_3C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_clpriv_4C            : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 1 ...
##  $ e_v2x_clpriv_5C            : num [1:6789] 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_corr_3C              : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_corr_4C              : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_corr_5C              : num [1:6789] 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_cspart_3C            : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_cspart_4C            : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 ...
##  $ e_v2x_cspart_5C            : num [1:6789] 0.25 0.25 0.25 0.25 0.25 0.5 0.25 0.25 0.25 0.25 ...
##  $ e_v2x_delibdem_3C          : num [1:6789] 0 0 0 0 0 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_delibdem_4C          : num [1:6789] 0 0 0 0 0 0.333 0.333 0.333 0.333 0.333 ...
##  $ e_v2x_delibdem_5C          : num [1:6789] 0 0 0 0.25 0.25 0.25 0.25 0.25 0.25 0.25 ...
##  $ e_v2x_EDcomp_thick_3C      : num [1:6789] 0 0 0 0 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_EDcomp_thick_4C      : num [1:6789] 0 0 0 0 0.333 0.333 0.333 0.667 0.667 0.667 ...
##  $ e_v2x_EDcomp_thick_5C      : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_egal_3C              : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_egal_4C              : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 ...
##  $ e_v2x_egal_5C              : num [1:6789] 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 ...
##  $ e_v2x_egaldem_3C           : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ e_v2x_egaldem_4C           : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ e_v2x_egaldem_5C           : num [1:6789] 0 0 0 0 0 0 0 0.25 0.25 0.25 ...
##  $ e_v2x_elecoff_3C           : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_elecoff_4C           : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_elecoff_5C           : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_execorr_3C           : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_execorr_4C           : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_execorr_5C           : num [1:6789] 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_feduni_3C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_feduni_4C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_feduni_5C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_frassoc_thick_3C     : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_frassoc_thick_4C     : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_frassoc_thick_5C     : num [1:6789] 0.5 0.5 0.5 0.75 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_freexp_3C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_freexp_4C            : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_freexp_5C            : num [1:6789] 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.75 ...
##  $ e_v2x_freexp_altinf_3C     : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_freexp_altinf_4C     : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_freexp_altinf_5C     : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.75 0.75 0.75 ...
##  $ e_v2x_gencl_3C             : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_gencl_4C             : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_gencl_5C             : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_gencs_3C             : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1 ...
##  $ e_v2x_gencs_4C             : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.667 ...
##  $ e_v2x_gencs_5C             : num [1:6789] 0.25 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_gender_3C            : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_gender_4C            : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_gender_5C            : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_genpp_3C             : num [1:6789] 1 1 1 1 1 1 1 1 1 1 ...
##  $ e_v2x_genpp_4C             : num [1:6789] 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 0.667 ...
##  $ e_v2x_genpp_5C             : num [1:6789] 0.75 0.75 0.75 0.75 0.75 0.75 0.75 0.5 0.5 0.5 ...
##  $ e_v2x_jucon_3C             : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_jucon_4C             : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 ...
##  $ e_v2x_jucon_5C             : num [1:6789] 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 ...
##  $ e_v2x_libdem_3C            : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ e_v2x_libdem_4C            : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ e_v2x_libdem_5C            : num [1:6789] 0 0 0 0 0 0 0 0.25 0.25 0.25 ...
##  $ e_v2x_liberal_3C           : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_liberal_4C           : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 ...
##  $ e_v2x_liberal_5C           : num [1:6789] 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 ...
##  $ e_v2x_mpi_3C               : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ e_v2x_mpi_4C               : num [1:6789] 0 0 0 0 0 0 0 0 0 0 ...
##  $ e_v2x_mpi_5C               : num [1:6789] 0 0 0 0 0 0 0 0 0 0.25 ...
##  $ e_v2x_partip_3C            : num [1:6789] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  $ e_v2x_partip_4C            : num [1:6789] 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 0.333 ...
##   [list output truncated]
##  - attr(*, "spec")=
##   .. cols(
##   ..   country_name = col_character(),
##   ..   country_text_id = col_character(),
##   ..   country_id = col_double(),
##   ..   year = col_double(),
##   ..   historical_date = col_date(format = ""),
##   ..   project = col_double(),
##   ..   historical = col_double(),
##   ..   histname = col_character(),
##   ..   codingstart = col_double(),
##   ..   codingend = col_double(),
##   ..   codingstart_contemp = col_double(),
##   ..   codingend_contemp = col_double(),
##   ..   codingstart_hist = col_double(),
##   ..   codingend_hist = col_double(),
##   ..   gapstart1 = col_double(),
##   ..   gapstart2 = col_double(),
##   ..   gapstart3 = col_double(),
##   ..   gapend1 = col_double(),
##   ..   gapend2 = col_double(),
##   ..   gapend3 = col_double(),
##   ..   gap_index = col_double(),
##   ..   COWcode = col_double(),
##   ..   e_v2x_api_3C = col_double(),
##   ..   e_v2x_api_4C = col_double(),
##   ..   e_v2x_api_5C = col_double(),
##   ..   e_v2x_civlib_3C = col_double(),
##   ..   e_v2x_civlib_4C = col_double(),
##   ..   e_v2x_civlib_5C = col_double(),
##   ..   e_v2x_clphy_3C = col_double(),
##   ..   e_v2x_clphy_4C = col_double(),
##   ..   e_v2x_clphy_5C = col_double(),
##   ..   e_v2x_clpol_3C = col_double(),
##   ..   e_v2x_clpol_4C = col_double(),
##   ..   e_v2x_clpol_5C = col_double(),
##   ..   e_v2x_clpriv_3C = col_double(),
##   ..   e_v2x_clpriv_4C = col_double(),
##   ..   e_v2x_clpriv_5C = col_double(),
##   ..   e_v2x_corr_3C = col_double(),
##   ..   e_v2x_corr_4C = col_double(),
##   ..   e_v2x_corr_5C = col_double(),
##   ..   e_v2x_cspart_3C = col_double(),
##   ..   e_v2x_cspart_4C = col_double(),
##   ..   e_v2x_cspart_5C = col_double(),
##   ..   e_v2x_delibdem_3C = col_double(),
##   ..   e_v2x_delibdem_4C = col_double(),
##   ..   e_v2x_delibdem_5C = col_double(),
##   ..   e_v2x_EDcomp_thick_3C = col_double(),
##   ..   e_v2x_EDcomp_thick_4C = col_double(),
##   ..   e_v2x_EDcomp_thick_5C = col_double(),
##   ..   e_v2x_egal_3C = col_double(),
##   ..   e_v2x_egal_4C = col_double(),
##   ..   e_v2x_egal_5C = col_double(),
##   ..   e_v2x_egaldem_3C = col_double(),
##   ..   e_v2x_egaldem_4C = col_double(),
##   ..   e_v2x_egaldem_5C = col_double(),
##   ..   e_v2x_elecoff_3C = col_double(),
##   ..   e_v2x_elecoff_4C = col_double(),
##   ..   e_v2x_elecoff_5C = col_double(),
##   ..   e_v2x_execorr_3C = col_double(),
##   ..   e_v2x_execorr_4C = col_double(),
##   ..   e_v2x_execorr_5C = col_double(),
##   ..   e_v2x_feduni_3C = col_double(),
##   ..   e_v2x_feduni_4C = col_double(),
##   ..   e_v2x_feduni_5C = col_double(),
##   ..   e_v2x_frassoc_thick_3C = col_double(),
##   ..   e_v2x_frassoc_thick_4C = col_double(),
##   ..   e_v2x_frassoc_thick_5C = col_double(),
##   ..   e_v2x_freexp_3C = col_double(),
##   ..   e_v2x_freexp_4C = col_double(),
##   ..   e_v2x_freexp_5C = col_double(),
##   ..   e_v2x_freexp_altinf_3C = col_double(),
##   ..   e_v2x_freexp_altinf_4C = col_double(),
##   ..   e_v2x_freexp_altinf_5C = col_double(),
##   ..   e_v2x_gencl_3C = col_double(),
##   ..   e_v2x_gencl_4C = col_double(),
##   ..   e_v2x_gencl_5C = col_double(),
##   ..   e_v2x_gencs_3C = col_double(),
##   ..   e_v2x_gencs_4C = col_double(),
##   ..   e_v2x_gencs_5C = col_double(),
##   ..   e_v2x_gender_3C = col_double(),
##   ..   e_v2x_gender_4C = col_double(),
##   ..   e_v2x_gender_5C = col_double(),
##   ..   e_v2x_genpp_3C = col_double(),
##   ..   e_v2x_genpp_4C = col_double(),
##   ..   e_v2x_genpp_5C = col_double(),
##   ..   e_v2x_jucon_3C = col_double(),
##   ..   e_v2x_jucon_4C = col_double(),
##   ..   e_v2x_jucon_5C = col_double(),
##   ..   e_v2x_libdem_3C = col_double(),
##   ..   e_v2x_libdem_4C = col_double(),
##   ..   e_v2x_libdem_5C = col_double(),
##   ..   e_v2x_liberal_3C = col_double(),
##   ..   e_v2x_liberal_4C = col_double(),
##   ..   e_v2x_liberal_5C = col_double(),
##   ..   e_v2x_mpi_3C = col_double(),
##   ..   e_v2x_mpi_4C = col_double(),
##   ..   e_v2x_mpi_5C = col_double(),
##   ..   e_v2x_partip_3C = col_double(),
##   ..   e_v2x_partip_4C = col_double(),
##   ..   e_v2x_partip_5C = col_double(),
##   ..   e_v2x_partipdem_3C = col_double(),
##   ..   e_v2x_partipdem_4C = col_double(),
##   ..   e_v2x_partipdem_5C = col_double(),
##   ..   e_v2x_polyarchy_3C = col_double(),
##   ..   e_v2x_polyarchy_4C = col_double(),
##   ..   e_v2x_polyarchy_5C = col_double(),
##   ..   e_v2x_pubcorr_3C = col_double(),
##   ..   e_v2x_pubcorr_4C = col_double(),
##   ..   e_v2x_pubcorr_5C = col_double(),
##   ..   e_v2x_suffr_3C = col_double(),
##   ..   e_v2x_suffr_4C = col_double(),
##   ..   e_v2x_suffr_5C = col_double(),
##   ..   e_v2xcl_rol_3C = col_double(),
##   ..   e_v2xcl_rol_4C = col_double(),
##   ..   e_v2xcl_rol_5C = col_double(),
##   ..   e_v2xcs_ccsi_3C = col_double(),
##   ..   e_v2xcs_ccsi_4C = col_double(),
##   ..   e_v2xcs_ccsi_5C = col_double(),
##   ..   e_v2xdd_dd_3C = col_double(),
##   ..   e_v2xdd_dd_4C = col_double(),
##   ..   e_v2xdd_dd_5C = col_double(),
##   ..   e_v2xdl_delib_3C = col_double(),
##   ..   e_v2xdl_delib_4C = col_double(),
##   ..   e_v2xdl_delib_5C = col_double(),
##   ..   e_v2xeg_eqdr_3C = col_double(),
##   ..   e_v2xeg_eqdr_4C = col_double(),
##   ..   e_v2xeg_eqdr_5C = col_double(),
##   ..   e_v2xeg_eqprotec_3C = col_double(),
##   ..   e_v2xeg_eqprotec_4C = col_double(),
##   ..   e_v2xeg_eqprotec_5C = col_double(),
##   ..   e_v2xel_frefair_3C = col_double(),
##   ..   e_v2xel_frefair_4C = col_double(),
##   ..   e_v2xel_frefair_5C = col_double(),
##   ..   e_v2xel_locelec_3C = col_double(),
##   ..   e_v2xel_locelec_4C = col_double(),
##   ..   e_v2xel_locelec_5C = col_double(),
##   ..   e_v2xel_regelec_3C = col_double(),
##   ..   e_v2xel_regelec_4C = col_double(),
##   ..   e_v2xel_regelec_5C = col_double(),
##   ..   e_v2xlg_legcon_3C = col_double(),
##   ..   e_v2xlg_legcon_4C = col_double(),
##   ..   e_v2xlg_legcon_5C = col_double(),
##   ..   e_v2xme_altinf_3C = col_double(),
##   ..   e_v2xme_altinf_4C = col_double(),
##   ..   e_v2xme_altinf_5C = col_double(),
##   ..   e_v2xps_party_3C = col_double(),
##   ..   e_v2xps_party_4C = col_double(),
##   ..   e_v2xps_party_5C = col_double(),
##   ..   e_boix_regime = col_double(),
##   ..   e_democracy_breakdowns = col_double(),
##   ..   e_democracy_omitteddata = col_double(),
##   ..   e_democracy_trans = col_double(),
##   ..   e_fh_cl = col_double(),
##   ..   e_fh_pr = col_double(),
##   ..   e_fh_rol = col_double(),
##   ..   e_fh_status = col_double(),
##   ..   e_wbgi_cce = col_double(),
##   ..   e_wbgi_gee = col_double(),
##   ..   e_wbgi_pve = col_double(),
##   ..   e_wbgi_rle = col_double(),
##   ..   e_wbgi_rqe = col_double(),
##   ..   e_wbgi_vae = col_double(),
##   ..   e_lexical_index = col_double(),
##   ..   e_uds_median = col_double(),
##   ..   e_uds_mean = col_double(),
##   ..   e_uds_pct025 = col_double(),
##   ..   e_uds_pct975 = col_double(),
##   ..   e_coups = col_double(),
##   ..   e_legparty = col_double(),
##   ..   e_autoc = col_double(),
##   ..   e_democ = col_double(),
##   ..   e_p_polity = col_double(),
##   ..   e_polcomp = col_double(),
##   ..   e_polity2 = col_double(),
##   ..   e_bnr_dem = col_double(),
##   ..   e_chga_demo = col_double(),
##   ..   e_ti_cpi = col_double(),
##   ..   e_vanhanen = col_double(),
##   ..   e_peaveduc = col_double(),
##   ..   e_peedgini = col_double(),
##   ..   e_area = col_double(),
##   ..   e_regiongeo = col_double(),
##   ..   e_regionpol = col_double(),
##   ..   e_regionpol_6C = col_double(),
##   ..   e_cow_exports = col_double(),
##   ..   e_cow_imports = col_double(),
##   ..   e_gdp = col_double(),
##   ..   e_gdp_sd = col_double(),
##   ..   e_gdppc = col_double(),
##   ..   e_gdppc_sd = col_double(),
##   ..   e_miinflat = col_double(),
##   ..   e_pop = col_double(),
##   ..   e_pop_sd = col_double(),
##   ..   e_total_fuel_income_pc = col_double(),
##   ..   e_total_oil_income_pc = col_double(),
##   ..   e_total_resources_income_pc = col_double(),
##   ..   e_radio_n = col_double(),
##   ..   e_miferrat = col_double(),
##   ..   e_mipopula = col_double(),
##   ..   e_miurbani = col_double(),
##   ..   e_miurbpop = col_double(),
##   ..   e_pefeliex = col_double(),
##   ..   e_peinfmor = col_double(),
##   ..   e_pelifeex = col_double(),
##   ..   e_pematmor = col_double(),
##   ..   e_wb_pop = col_double(),
##   ..   e_civil_war = col_double(),
##   ..   e_miinteco = col_double(),
##   ..   e_miinterc = col_double(),
##   ..   e_pt_coup = col_double(),
##   ..   e_pt_coup_attempts = col_double()
##   .. )
##  - attr(*, "problems")=<externalptr>
\end{verbatim}

Usually, the second step of my data inquiry is having an overview of the
\emph{identifiers} of data points. In our case, the identifiers are
country names, country IDs, and years. Using the \texttt{distinct()}
function can effectively identify the distinct levels of
\emph{identifiers}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(country\_name, country\_id, year) }\SpecialCharTok{|\textgreater{}} \FunctionTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 3
##    country_name country_id  year
##    <chr>             <dbl> <dbl>
##  1 Mexico                3  1984
##  2 Mexico                3  1985
##  3 Mexico                3  1986
##  4 Mexico                3  1987
##  5 Mexico                3  1988
##  6 Mexico                3  1989
##  7 Mexico                3  1990
##  8 Mexico                3  1991
##  9 Mexico                3  1992
## 10 Mexico                3  1993
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Which countries are in this dataset}
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(country\_name) }\SpecialCharTok{|\textgreater{}} \FunctionTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 181 x 1
##    country_name 
##    <chr>        
##  1 Mexico       
##  2 Suriname     
##  3 Sweden       
##  4 Switzerland  
##  5 Ghana        
##  6 South Africa 
##  7 Japan        
##  8 Burma/Myanmar
##  9 Russia       
## 10 Albania      
## # i 171 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\SpecialCharTok{|\textgreater{}} \FunctionTok{select}\NormalTok{(year) }\SpecialCharTok{|\textgreater{}} \FunctionTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 39 x 1
##     year
##    <dbl>
##  1  1984
##  2  1985
##  3  1986
##  4  1987
##  5  1988
##  6  1989
##  7  1990
##  8  1991
##  9  1992
## 10  1993
## # i 29 more rows
\end{verbatim}

Select both the country identifiers, GDP, and GDP per capita;
``\textless-'' create a new dataset: d\_gdp {[}without changing the
columns{]}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_gdp }\OtherTok{\textless{}{-}}\NormalTok{ d }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(country\_name, country\_id, year, e\_gdp, e\_gdppc)}

\NormalTok{d\_gdp}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 5
##    country_name country_id  year   e_gdp e_gdppc
##    <chr>             <dbl> <dbl>   <dbl>   <dbl>
##  1 Mexico                3  1984  93563.    11.7
##  2 Mexico                3  1985  94259.    11.5
##  3 Mexico                3  1986  92750.    11.1
##  4 Mexico                3  1987  93220.    10.9
##  5 Mexico                3  1988  94687.    10.8
##  6 Mexico                3  1989  98145.    11.0
##  7 Mexico                3  1990 103254.    11.4
##  8 Mexico                3  1991 107374.    11.6
##  9 Mexico                3  1992 111533.    11.9
## 10 Mexico                3  1993 114611.    12.0
## # i 6,779 more rows
\end{verbatim}

\hypertarget{rename-columns-to-make-names-informative}{%
\subsubsection{3. Rename Columns to Make Names
Informative}\label{rename-columns-to-make-names-informative}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_gdp }\OtherTok{\textless{}{-}}\NormalTok{ d\_gdp }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{rename}\NormalTok{(}\StringTok{"GDP"} \OtherTok{=} \StringTok{"e\_gdp"}\NormalTok{, }\StringTok{"GDP\_per\_capita"} \OtherTok{=} \StringTok{"e\_gdppc"}\NormalTok{,}
         \StringTok{"Country"} \OtherTok{=} \StringTok{"country\_name"}\NormalTok{, }\StringTok{"ID"} \OtherTok{=} \StringTok{"country\_id"}\NormalTok{,}
         \StringTok{"Year"} \OtherTok{=} \StringTok{"year"}\NormalTok{)}

\NormalTok{d\_gdp}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 5
##    Country    ID  Year     GDP GDP_per_capita
##    <chr>   <dbl> <dbl>   <dbl>          <dbl>
##  1 Mexico      3  1984  93563.           11.7
##  2 Mexico      3  1985  94259.           11.5
##  3 Mexico      3  1986  92750.           11.1
##  4 Mexico      3  1987  93220.           10.9
##  5 Mexico      3  1988  94687.           10.8
##  6 Mexico      3  1989  98145.           11.0
##  7 Mexico      3  1990 103254.           11.4
##  8 Mexico      3  1991 107374.           11.6
##  9 Mexico      3  1992 111533.           11.9
## 10 Mexico      3  1993 114611.           12.0
## # i 6,779 more rows
\end{verbatim}

\hypertarget{subset-rows-of-the-data-using-slice_}{%
\subsubsection{\texorpdfstring{4. Subset Rows of the Data Using
\texttt{slice\_}}{4. Subset Rows of the Data Using slice\_}}\label{subset-rows-of-the-data-using-slice_}}

The set of \texttt{slice\_} functions will become handy when you want to
take a subset of rows based on some simple rules.

If you would like to get 10 obervations (countries-years) with the
maximum \texttt{GDP}, use \texttt{slice\_max}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want countries{-}years with highest GDP}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{slice\_max}\NormalTok{(}\AttributeTok{order\_by =}\NormalTok{ GDP, }\AttributeTok{n =} \DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 10 x 5
##    Country                     ID  Year      GDP GDP_per_capita
##    <chr>                    <dbl> <dbl>    <dbl>          <dbl>
##  1 China                      110  2019 2279809.           15.4
##  2 China                      110  2018 2205730.           14.9
##  3 China                      110  2017 2136176.           14.5
##  4 United States of America    20  2019 2118706.           60.6
##  5 United States of America    20  2018 2077898.           59.6
##  6 China                      110  2016 2039529.           13.9
##  7 United States of America    20  2017 2023242.           58.5
##  8 United States of America    20  2016 1980809.           57.6
##  9 China                      110  2015 1953127.           13.3
## 10 United States of America    20  2015 1942092.           56.7
\end{verbatim}

Similiarily, if you want a subset of countries-years with mimnimal GDP,
use \texttt{slice\_min}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Get countries{-}years with the lowest GDP}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{slice\_min}\NormalTok{(}\AttributeTok{order\_by =}\NormalTok{ GDP, }\AttributeTok{n =} \DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 10 x 5
##    Country                  ID  Year   GDP GDP_per_capita
##    <chr>                 <dbl> <dbl> <dbl>          <dbl>
##  1 Sao Tome and Principe   196  1988  24.0           2.04
##  2 Sao Tome and Principe   196  1987  24.0           2.08
##  3 Sao Tome and Principe   196  1986  24.4           2.17
##  4 Sao Tome and Principe   196  1984  24.7           2.29
##  5 Sao Tome and Principe   196  1985  24.9           2.26
##  6 Sao Tome and Principe   196  1989  25.0           2.06
##  7 Sao Tome and Principe   196  1990  25.2           2.03
##  8 Sao Tome and Principe   196  1992  25.2           1.95
##  9 Sao Tome and Principe   196  1991  25.3           1.99
## 10 Sao Tome and Principe   196  1993  25.5           1.93
\end{verbatim}

Finally, if you wish to take a random sample of observations in the
data, use \texttt{slice\_sample}. Note that you may tell R the exact
sample size you want:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{52}\NormalTok{)}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{slice\_sample}\NormalTok{(}\AttributeTok{n =} \DecValTok{10}\NormalTok{) }\CommentTok{\# Sample 10 observations}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 10 x 5
##    Country        ID  Year      GDP GDP_per_capita
##    <chr>       <dbl> <dbl>    <dbl>          <dbl>
##  1 Cape Verde     70  1988     76.5           2.18
##  2 Oman          187  1991   2955.           14.7 
##  3 Romania       190  2010  30202.           14.0 
##  4 South Korea    42  2001 124701.           24.6 
##  5 Mozambique     57  2012   3589.            1.41
##  6 Bulgaria      152  1992   8739.            9.53
##  7 Morocco        90  2001  15549.            5.03
##  8 Vietnam        34  1990  10537.            1.47
##  9 Canada         66  1985  83713.           30.4 
## 10 Serbia        198  1987  17430.            7.64
\end{verbatim}

Or you may define the sample size as a poroportion of the original data
size:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{52}\NormalTok{) }\DocumentationTok{\#\#\# [52?]}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{slice\_sample}\NormalTok{(}\AttributeTok{prop =} \FloatTok{0.1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 678 x 5
##    Country        ID  Year      GDP GDP_per_capita
##    <chr>       <dbl> <dbl>    <dbl>          <dbl>
##  1 Cape Verde     70  1988     76.5           2.18
##  2 Oman          187  1991   2955.           14.7 
##  3 Romania       190  2010  30202.           14.0 
##  4 South Korea    42  2001 124701.           24.6 
##  5 Mozambique     57  2012   3589.            1.41
##  6 Bulgaria      152  1992   8739.            9.53
##  7 Morocco        90  2001  15549.            5.03
##  8 Vietnam        34  1990  10537.            1.47
##  9 Canada         66  1985  83713.           30.4 
## 10 Serbia        198  1987  17430.            7.64
## # i 668 more rows
\end{verbatim}

{[}???{]}The \texttt{set.seed} function specify a random seed with which
the system uses to generate the ``random sample.'' Long story short,
``random'' stuff generated by a machine are never really random.
Instead, the random outputs (in our case, a random subset of the data)
are results of the computer input some ``random seed'' to some
complicated formula. When you define a random seed, you can guarantee
that you obtain the same random sample every time you run the program --
this makes your data science research reproducible. As we have
discussed, reproducibility is a desired feature of a data science
project. So I would strongly recommend setting a random seed every time.

\hypertarget{subset-rows-of-the-data-using-filter}{%
\subsubsection{\texorpdfstring{5. Subset Rows of the Data Using
\texttt{filter}}{5. Subset Rows of the Data Using filter}}\label{subset-rows-of-the-data-using-filter}}

For example, we may take the observations whose \texttt{Year} variable
ranges from 2000 to 2005.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want: 2000{-}2005 data}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{filter}\NormalTok{(Year }\SpecialCharTok{\textgreater{}=} \DecValTok{2000} \SpecialCharTok{\&}\NormalTok{ Year }\SpecialCharTok{\textless{}=} \DecValTok{2005}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1,062 x 5
##    Country     ID  Year     GDP GDP_per_capita
##    <chr>    <dbl> <dbl>   <dbl>          <dbl>
##  1 Mexico       3  2000 145206.          13.7 
##  2 Mexico       3  2001 146993.          13.6 
##  3 Mexico       3  2002 148549.          13.6 
##  4 Mexico       3  2003 151035.          13.7 
##  5 Mexico       3  2004 156578.          14.1 
##  6 Mexico       3  2005 162094.          14.3 
##  7 Suriname     4  2000    383.           7.67
##  8 Suriname     4  2001    402.           7.93
##  9 Suriname     4  2002    423.           8.25
## 10 Suriname     4  2003    451.           8.67
## # i 1,052 more rows
\end{verbatim}

We may subset observations whose \texttt{Country} variable, a
\texttt{character} variable, equals to the text \texttt{"China"}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{filter}\NormalTok{(Country }\SpecialCharTok{==} \StringTok{"China"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 39 x 5
##    Country    ID  Year     GDP GDP_per_capita
##    <chr>   <dbl> <dbl>   <dbl>          <dbl>
##  1 China     110  1984 243976.           2.21
##  2 China     110  1985 265805.           2.36
##  3 China     110  1986 285707.           2.50
##  4 China     110  1987 308227.           2.65
##  5 China     110  1988 322596.           2.73
##  6 China     110  1989 327739.           2.74
##  7 China     110  1990 315683.           2.63
##  8 China     110  1991 329836.           2.71
##  9 China     110  1992 359817.           2.90
## 10 China     110  1993 393449.           3.15
## # i 29 more rows
\end{verbatim}

We may also stack multiple \texttt{filter} functions. For example, you
may do the following if you want to look at a subset of the data whose
\texttt{Year} ranges from 2000 to 2005 and \texttt{Country} equals to
\texttt{"China"}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want: 2000 {-} 2005 from China}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{filter}\NormalTok{(Year }\SpecialCharTok{\textgreater{}=} \DecValTok{2000} \SpecialCharTok{\&}\NormalTok{ Year }\SpecialCharTok{\textless{}=} \DecValTok{2005}\NormalTok{) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{filter}\NormalTok{(Country }\SpecialCharTok{==} \StringTok{"China"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 5
##   Country    ID  Year     GDP GDP_per_capita
##   <chr>   <dbl> <dbl>   <dbl>          <dbl>
## 1 China     110  2000 633740.           4.74
## 2 China     110  2001 682141.           5.05
## 3 China     110  2002 738393.           5.43
## 4 China     110  2003 798702.           5.83
## 5 China     110  2004 871314.           6.31
## 6 China     110  2005 956102.           6.89
\end{verbatim}

\hypertarget{sort-the-data-based-on-values-of-rows-using-arrange}{%
\subsubsection{\texorpdfstring{6. Sort the Data based on Values of Rows
using
\texttt{arrange}}{6. Sort the Data based on Values of Rows using arrange}}\label{sort-the-data-based-on-values-of-rows-using-arrange}}

Now we will try to sort the dataset \texttt{d\_gdp} by the value of GDP
per capita using the \texttt{arrange}. We may have country-year with
small values of \texttt{GDP\_per\_capita} appearing first and those with
larger values of \texttt{GDP\_per\_capita} coming after them.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want: sort the row by GDP per capita}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{arrange}\NormalTok{(GDP\_per\_capita)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 5
##    Country                             ID  Year    GDP GDP_per_capita
##    <chr>                            <dbl> <dbl>  <dbl>          <dbl>
##  1 Liberia                             86  1995   62.3          0.286
##  2 Liberia                             86  1994   65.5          0.307
##  3 Liberia                             86  1996   70.6          0.309
##  4 Liberia                             86  1993   81.5          0.383
##  5 Liberia                             86  1997  107.           0.429
##  6 Liberia                             86  1992  113.           0.53 
##  7 Democratic Republic of the Congo   111  2002 2966.           0.538
##  8 Democratic Republic of the Congo   111  2001 2890.           0.54 
##  9 Liberia                             86  1998  147.           0.543
## 10 Democratic Republic of the Congo   111  2003 3141.           0.552
## # i 6,779 more rows
\end{verbatim}

Want the countries-years with larger values of \texttt{GDP\_per\_capita}
appear first? Simply reverse the value using \texttt{-GDP\_per\_capita}.
Alternatively, you may replace \texttt{desc(GDP\_per\_capita)}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{arrange}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{GDP\_per\_capita)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 5
##    Country                 ID  Year    GDP GDP_per_capita
##    <chr>                <dbl> <dbl>  <dbl>          <dbl>
##  1 United Arab Emirates   207  1984 16817.          115. 
##  2 United Arab Emirates   207  1985 15946.          103. 
##  3 Qatar                   94  2012 23055.          101. 
##  4 Qatar                   94  2011 21273.          100. 
##  5 Qatar                   94  2013 24074.           98.9
##  6 United Arab Emirates   207  1991 20567.           96.5
##  7 United Arab Emirates   207  1992 21506.           95.7
##  8 Qatar                   94  2014 24194.           95.3
##  9 Qatar                   94  2010 18107.           94.4
## 10 United Arab Emirates   207  2000 31871.           93.3
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{arrange}\NormalTok{(}\FunctionTok{desc}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{GDP\_per\_capita))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 5
##    Country                             ID  Year    GDP GDP_per_capita
##    <chr>                            <dbl> <dbl>  <dbl>          <dbl>
##  1 Liberia                             86  1995   62.3          0.286
##  2 Liberia                             86  1994   65.5          0.307
##  3 Liberia                             86  1996   70.6          0.309
##  4 Liberia                             86  1993   81.5          0.383
##  5 Liberia                             86  1997  107.           0.429
##  6 Liberia                             86  1992  113.           0.53 
##  7 Democratic Republic of the Congo   111  2002 2966.           0.538
##  8 Democratic Republic of the Congo   111  2001 2890.           0.54 
##  9 Liberia                             86  1998  147.           0.543
## 10 Democratic Republic of the Congo   111  2003 3141.           0.552
## # i 6,779 more rows
\end{verbatim}

\hypertarget{perform-4-5-6-group-by-group-group_by-ungroup}{%
\subsubsection{\texorpdfstring{7. Perform (4) (5) (6) group by group:
\texttt{group\_by},
\texttt{ungroup}}{7. Perform (4) (5) (6) group by group: group\_by, ungroup}}\label{perform-4-5-6-group-by-group-group_by-ungroup}}

\textbf{Task:} Create a dataset that contains the year of the higest
development level for each country/ region respectively.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Perform a data availability/ integrity check. Then aggregate the data
  into a new country-level dataset which contains the following
  indicators:

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \item
    Average development level from 1984 to 2022.
  \item
    Magnitude of growth from 1984 to 2022.
  \end{enumerate}
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# want: for each country, we want the year with the highest GDP; [without "group\_by()", only one country with the highest GDP will come out]}

\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{slice\_max}\NormalTok{(GDP, }\AttributeTok{n=}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 341 x 5
## # Groups:   Country [181]
##    Country        ID  Year     GDP GDP_per_capita
##    <chr>       <dbl> <dbl>   <dbl>          <dbl>
##  1 Afghanistan    36  2019   6775.           1.74
##  2 Albania        12  2019   3490.          11.3 
##  3 Algeria       103  2019  52143.          11.6 
##  4 Angola        104  2015  17449.           6.56
##  5 Argentina      37  2017  80302.          17.2 
##  6 Armenia       105  2019   3903.          12.3 
##  7 Australia      67  2019 127644.          48.1 
##  8 Austria       144  2019  44063.          46.2 
##  9 Azerbaijan    106  2014  15216.          15.1 
## 10 Bahrain       146  2018   5149.          30.9 
## # i 331 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# How many entries are there for each country}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{count}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 181 x 2
## # Groups:   Country [181]
##    Country         n
##    <chr>       <int>
##  1 Afghanistan    39
##  2 Albania        39
##  3 Algeria        39
##  4 Angola         39
##  5 Argentina      39
##  6 Armenia        33
##  7 Australia      39
##  8 Austria        39
##  9 Azerbaijan     33
## 10 Bahrain        39
## # i 171 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want: For each country, get the year when it has worst GDP}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{slice\_min}\NormalTok{(GDP, }\AttributeTok{n =} \DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 341 x 5
## # Groups:   Country [181]
##    Country        ID  Year    GDP GDP_per_capita
##    <chr>       <dbl> <dbl>  <dbl>          <dbl>
##  1 Afghanistan    36  1994  1573.           0.85
##  2 Albania        12  1992   995.           2.98
##  3 Algeria       103  1988 22997.           8.83
##  4 Angola        104  1984  3001.           3.06
##  5 Argentina      37  1985 25577.           8.43
##  6 Armenia       105  1994  1037.           3.12
##  7 Australia      67  1984 42768.          25.6 
##  8 Austria       144  1984 18343.          22.9 
##  9 Azerbaijan    106  1996  2362.           2.91
## 10 Bahrain       146  1986   726.          15.4 
## # i 331 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# INSERT CODE HERE}
\end{Highlighting}
\end{Shaded}

\hypertarget{create-new-columns-in-the-data-group_by-mutate-ungroup}{%
\subsubsection{\texorpdfstring{8. Create new columns in the data:
\texttt{group\_by}, \texttt{mutate},
\texttt{ungroup}}{8. Create new columns in the data: group\_by, mutate, ungroup}}\label{create-new-columns-in-the-data-group_by-mutate-ungroup}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want: create a new column [e.g. with GDP values]}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{New =}\NormalTok{ GDP)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 6
##    Country    ID  Year     GDP GDP_per_capita     New
##    <chr>   <dbl> <dbl>   <dbl>          <dbl>   <dbl>
##  1 Mexico      3  1984  93563.           11.7  93563.
##  2 Mexico      3  1985  94259.           11.5  94259.
##  3 Mexico      3  1986  92750.           11.1  92750.
##  4 Mexico      3  1987  93220.           10.9  93220.
##  5 Mexico      3  1988  94687.           10.8  94687.
##  6 Mexico      3  1989  98145.           11.0  98145.
##  7 Mexico      3  1990 103254.           11.4 103254.
##  8 Mexico      3  1991 107374.           11.6 107374.
##  9 Mexico      3  1992 111533.           11.9 111533.
## 10 Mexico      3  1993 114611.           12.0 114611.
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{New =} \FunctionTok{log}\NormalTok{(GDP))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 6
##    Country    ID  Year     GDP GDP_per_capita   New
##    <chr>   <dbl> <dbl>   <dbl>          <dbl> <dbl>
##  1 Mexico      3  1984  93563.           11.7  11.4
##  2 Mexico      3  1985  94259.           11.5  11.5
##  3 Mexico      3  1986  92750.           11.1  11.4
##  4 Mexico      3  1987  93220.           10.9  11.4
##  5 Mexico      3  1988  94687.           10.8  11.5
##  6 Mexico      3  1989  98145.           11.0  11.5
##  7 Mexico      3  1990 103254.           11.4  11.5
##  8 Mexico      3  1991 107374.           11.6  11.6
##  9 Mexico      3  1992 111533.           11.9  11.6
## 10 Mexico      3  1993 114611.           12.0  11.6
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# want: New column to be GDP relative to average GDP in the world 1984{-}2022}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{New =}\NormalTok{ GDP }\SpecialCharTok{/} \FunctionTok{mean}\NormalTok{(GDP, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 6
##    Country    ID  Year     GDP GDP_per_capita   New
##    <chr>   <dbl> <dbl>   <dbl>          <dbl> <dbl>
##  1 Mexico      3  1984  93563.           11.7  2.11
##  2 Mexico      3  1985  94259.           11.5  2.13
##  3 Mexico      3  1986  92750.           11.1  2.09
##  4 Mexico      3  1987  93220.           10.9  2.10
##  5 Mexico      3  1988  94687.           10.8  2.14
##  6 Mexico      3  1989  98145.           11.0  2.21
##  7 Mexico      3  1990 103254.           11.4  2.33
##  8 Mexico      3  1991 107374.           11.6  2.42
##  9 Mexico      3  1992 111533.           11.9  2.52
## 10 Mexico      3  1993 114611.           12.0  2.59
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# want: New column to be GDP relative to average GDP of the country in the world 1984{-}2022}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{New =}\NormalTok{ GDP }\SpecialCharTok{/} \FunctionTok{mean}\NormalTok{(GDP, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 6
## # Groups:   Country [181]
##    Country    ID  Year     GDP GDP_per_capita   New
##    <chr>   <dbl> <dbl>   <dbl>          <dbl> <dbl>
##  1 Mexico      3  1984  93563.           11.7 0.624
##  2 Mexico      3  1985  94259.           11.5 0.628
##  3 Mexico      3  1986  92750.           11.1 0.618
##  4 Mexico      3  1987  93220.           10.9 0.622
##  5 Mexico      3  1988  94687.           10.8 0.631
##  6 Mexico      3  1989  98145.           11.0 0.654
##  7 Mexico      3  1990 103254.           11.4 0.688
##  8 Mexico      3  1991 107374.           11.6 0.716
##  9 Mexico      3  1992 111533.           11.9 0.744
## 10 Mexico      3  1993 114611.           12.0 0.764
## # i 6,779 more rows
\end{verbatim}

\textbf{Task:} Add the following economic indicators to the data:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Country-year development level with reference to that of 1984.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Country{-}year development level with reference to that of 1984}
\CommentTok{\#?first()}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(Year) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{GDP\_over\_1984 =}\NormalTok{ GDP }\SpecialCharTok{/} \FunctionTok{first}\NormalTok{(GDP)) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{ungroup}\NormalTok{() }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(Country, Year)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 6
##    Country        ID  Year   GDP GDP_per_capita GDP_over_1984
##    <chr>       <dbl> <dbl> <dbl>          <dbl>         <dbl>
##  1 Afghanistan    36  1984 2723.          2.03          1    
##  2 Afghanistan    36  1985 2690.          2.01          0.988
##  3 Afghanistan    36  1986 2617.          1.97          0.961
##  4 Afghanistan    36  1987 2471.          1.86          0.907
##  5 Afghanistan    36  1988 2317.          1.73          0.851
##  6 Afghanistan    36  1989 2173.          1.59          0.798
##  7 Afghanistan    36  1990 2066.          1.46          0.759
##  8 Afghanistan    36  1991 1953.          1.32          0.717
##  9 Afghanistan    36  1992 1842.          1.16          0.676
## 10 Afghanistan    36  1993 1676.          0.973         0.616
## # i 6,779 more rows
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Year-on-year economic growth.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Year{-}on{-}year economic growth}
\CommentTok{\#?lag}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(Year) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{GDP\_yoy\_change =}\NormalTok{ GDP }\SpecialCharTok{{-}} \FunctionTok{lag}\NormalTok{(GDP, }\AttributeTok{n =} \DecValTok{1}\NormalTok{)) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{ungroup}\NormalTok{() }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(Country, Year)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6,789 x 6
##    Country        ID  Year   GDP GDP_per_capita GDP_yoy_change
##    <chr>       <dbl> <dbl> <dbl>          <dbl>          <dbl>
##  1 Afghanistan    36  1984 2723.          2.03            NA  
##  2 Afghanistan    36  1985 2690.          2.01           -33.1
##  3 Afghanistan    36  1986 2617.          1.97           -72.8
##  4 Afghanistan    36  1987 2471.          1.86          -146. 
##  5 Afghanistan    36  1988 2317.          1.73          -154. 
##  6 Afghanistan    36  1989 2173.          1.59          -144. 
##  7 Afghanistan    36  1990 2066.          1.46          -107. 
##  8 Afghanistan    36  1991 1953.          1.32          -113. 
##  9 Afghanistan    36  1992 1842.          1.16          -111. 
## 10 Afghanistan    36  1993 1676.          0.973         -166. 
## # i 6,779 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# INSERT CODE HERE}
\end{Highlighting}
\end{Shaded}

\hypertarget{summarize-the-data-group_by-summarise-ungroup}{%
\subsubsection{\texorpdfstring{9. Summarize the data:
\texttt{group\_by}, \texttt{summarise},
\texttt{ungroup}}{9. Summarize the data: group\_by, summarise, ungroup}}\label{summarize-the-data-group_by-summarise-ungroup}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Want: Average GDP level of the world}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} \FunctionTok{summarise}\NormalTok{(}\AttributeTok{gdp\_average =} \FunctionTok{mean}\NormalTok{(GDP, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
                   \AttributeTok{GDP\_per\_capita\_average =} \FunctionTok{mean}\NormalTok{(GDP\_per\_capita, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 1 x 2
##   gdp_average GDP_per_capita_average
##         <dbl>                  <dbl>
## 1      44324.                   13.2
\end{verbatim}

\textbf{Task:} Perform a data availability/ integrity check. Then
aggregate the data into a new country-level dataset which contains the
following indicators:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Average development level from 1984 to 2022.
\item
  Magnitude of growth from 1984 to 2022.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Data integrity check}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}}
  \CommentTok{\#create a column that indicates whether the value is missing}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{GDP\_missing =} \FunctionTok{is.na}\NormalTok{(GDP), }\AttributeTok{.after =}\NormalTok{ GDP) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{N\_GDP\_missing =} \FunctionTok{sum}\NormalTok{(GDP\_missing))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 181 x 2
##    Country     N_GDP_missing
##    <chr>               <int>
##  1 Afghanistan             3
##  2 Albania                 3
##  3 Algeria                 3
##  4 Angola                  3
##  5 Argentina               3
##  6 Armenia                 4
##  7 Australia               3
##  8 Austria                 3
##  9 Azerbaijan              3
## 10 Bahrain                 3
## # i 171 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# average development level}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{GDP\_average =} \FunctionTok{mean}\NormalTok{(GDP, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{),}
            \AttributeTok{GDPpc\_average =} \FunctionTok{mean}\NormalTok{(GDP\_per\_capita, }\AttributeTok{na.rm =}\NormalTok{ T))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 181 x 3
##    Country     GDP_average GDPpc_average
##    <chr>             <dbl>         <dbl>
##  1 Afghanistan       3374.          1.35
##  2 Albania           2029.          6.33
##  3 Algeria          35153.         10.1 
##  4 Angola            8133.          4.07
##  5 Argentina        53263.         13.2 
##  6 Armenia           2163.          6.83
##  7 Australia        83495.         38.3 
##  8 Austria          31285.         35.6 
##  9 Azerbaijan        8230.          8.72
## 10 Bahrain           2493.         24.4 
## # i 171 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# GDP Growth and GDP per capita growth: 2019 over 1984}
\NormalTok{d\_gdp }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{filter}\NormalTok{(Year }\SpecialCharTok{\textgreater{}=} \DecValTok{1984} \SpecialCharTok{\&}\NormalTok{ Year }\SpecialCharTok{\textless{}=} \DecValTok{2019}\NormalTok{) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{group\_by}\NormalTok{(Country) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(Year) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{GDP\_growth\_2019\_1984 =}\NormalTok{ (}\FunctionTok{last}\NormalTok{(GDP) }\SpecialCharTok{{-}} \FunctionTok{first}\NormalTok{(GDP)) }\SpecialCharTok{/} \FunctionTok{first}\NormalTok{(GDP),}
            \AttributeTok{GDPpc\_growth\_2019\_1984 =}\NormalTok{ (}\FunctionTok{last}\NormalTok{(GDP\_per\_capita) }\SpecialCharTok{{-}} \FunctionTok{first}\NormalTok{(GDP\_per\_capita)) }\SpecialCharTok{/} \FunctionTok{first}\NormalTok{(GDP\_per\_capita)) }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{ungroup}\NormalTok{() }\SpecialCharTok{|\textgreater{}}
  \FunctionTok{arrange}\NormalTok{(Country)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 181 x 3
##    Country     GDP_growth_2019_1984 GDPpc_growth_2019_1984
##    <chr>                      <dbl>                  <dbl>
##  1 Afghanistan                 1.49                 -0.142
##  2 Albania                     1.84                  1.82 
##  3 Algeria                     1.14                  0.118
##  4 Angola                      4.64                  0.763
##  5 Argentina                   2.03                  0.922
##  6 Armenia                    NA                    NA    
##  7 Australia                   1.98                  0.879
##  8 Austria                     1.40                  1.02 
##  9 Azerbaijan                  1.47                  0.766
## 10 Bahrain                     5.50                  0.711
## # i 171 more rows
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# INSERT CODE HERE}
\end{Highlighting}
\end{Shaded}

\hypertarget{final-notes}{%
\subsection{Final Notes}\label{final-notes}}

\hypertarget{pipe}{%
\subsubsection{``Pipe''}\label{pipe}}

Picture1,2,3

\hypertarget{to-create-a-new-object-or-not}{%
\subsubsection{To Create a New Object or
Not}\label{to-create-a-new-object-or-not}}

\hypertarget{style}{%
\subsubsection{Style}\label{style}}

\end{document}
